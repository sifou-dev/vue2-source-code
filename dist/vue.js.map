{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(value) {\n    this.walk(value)\n  }\n\n  walk(data) {\n    const keys = Object.keys(data)\n\n    for (let i = 0, len = keys.length; i < len; i++) {\n      const key = keys[i]\n      const value = data[key]\n\n      defineReactive(data, key, value)\n    }\n  }\n}\n\nexport function observe(data) {\n  if (typeof data !== 'object' || data === null) {\n    return data\n  }\n\n  new Observer(data)\n}\n\nfunction defineReactive(data, key, value) {\n  // 递归\n  observe(value)\n\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('获取')\n      return value\n    },\n    set(newVal) {\n      if (value === newVal) {\n        return\n      }\n      value = newVal\n      observe(newVal)\n    }\n  })\n}","import { observe } from './observer/index'\n\nexport function initState(vm) {\n  const ops = vm.$options\n\n  if (ops.props) {\n    initProps()\n  }\n\n  if (ops.data) {\n    initData(vm)\n  }\n\n  if (ops.computed) {\n    initComputed()\n  }\n\n  if (ops.watch) {\n    initWatch()\n  }\n\n  if (ops.methods) {\n    initMethods()\n  }\n\n  function initProps() { }\n  /**\n   * data 数据初始化，分2种情况\n   * data 为函数(组件)\n   * data 为对象(根实例)\n   */\n  function initData(vm) {\n    let { data } = vm.$options\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\n\n    // 开始正式的数据劫持\n    observe(data)\n\n  }\n  function initComputed() { }\n  function initWatch() { }\n  function initMethods() { }\n}","import { initState } from './state'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n\n    vm.$options = options || {}\n    // 初始化状态\n    initState(vm)\n  }\n}","import { initMixin } from './init'\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nexport default Vue"],"names":["Observer","value","_classCallCheck","walk","_createClass","key","data","keys","Object","i","len","length","defineReactive","observe","_typeof","defineProperty","get","console","log","set","newVal","initState","vm","ops","$options","props","initData","computed","watch","methods","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}